<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LêUai - Catálogo</title>
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
    <link rel="stylesheet" href="../styles/styles.css">
    <style>
        /* Estilos especificos do Catalogo */
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .novidades-section {
            display: flex;
            gap: 3rem;
            align-items: flex-start;
            margin-bottom: 3rem;
        }

        .titulo-novidades {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--gray-900);
            min-width: 200px;
            text-align: right;
            padding-top: 1rem;
        }

        .catalogo-novidades {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            flex: 1;
        }

        .book-card-novidade {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .book-card-novidade:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .capa-novidade-container {
            width: 100%;
            height: 180px;
            position: relative;
            overflow: hidden;
        }

        .capa-novidade-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .capa-novidade-tag {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
        }

        .book-info-novidade {
            padding: 1rem;
        }

        .book-info-novidade h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .book-info-novidade p {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        .catalogo-geral {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .book-item-geral {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .book-item-geral:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .capa-mini-container {
            width: 60px;
            height: 80px;
            border-radius: var(--radius-sm);
            overflow: hidden;
            flex-shrink: 0;
        }

        .capa-mini-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .info-geral h3 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .info-geral p {
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        .info-geral span {
            font-size: 0.8rem;
            color: var(--gray-500);
            font-weight: 500;
        }

        .moby-dick-item {
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            .novidades-section {
                flex-direction: column;
            }
            .titulo-novidades {
                text-align: center;
            }
            .catalogo-novidades {
                grid-template-columns: 1fr;
            }
        }

    </style>
</head>
<body>

    <header>
        <div class="header-logo">
            <img src="../assets/logo.png" alt="LêUai">
        </div>
        <nav>
            <ul>
                <li><a href="./Home.html">Home</a></li>
                <li><a href="./catálogodelivros.html">Acervo</a></li>
                <li><a href="./favoritos.html">Salvos</a></li>
                <li><a href="./expert-reader.html">Expert Reader</a></li>
                <li>
                    <div class="search-container">
                        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.3-4.3"></path>
                        </svg>
                        <input type="text" id="searchInput" placeholder="Pesquisar">
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <section class="hero-banner">
        <h1>Catálogo de Livros</h1>
        <p>Descubra novos títulos e explore nosso acervo.</p>
        <div class="search-box">
             <button id="heroSearchButton">Buscar</button>
        </div>
        <div class="categories">
            <a href="#" data-action="search" data-term="Romance">Romance</a>
            <a href="#" data-action="search" data-term="Terror">Terror</a>
            <a href="#" data-action="search" data-term="Tecnologia">Tecnologia</a>
            <a href="#" data-action="search" data-term="História">História</a>
        </div>
    </section>

    <div class="content-wrapper">
        <section class="novidades-section">
            <div class="titulo-novidades">
                Novidades
            </div>
            <div class="novidades-livros-container">
                <div class="catalogo-novidades">
                    
                    <div class="book-card-novidade" data-action="view" data-book-title="A Jornada">
                        <div class="capa-novidade-container">
                            <img src="https://m.media-amazon.com/images/I/61DNtdvF9RL._SL1360_.jpg" alt="Capa do livro A Jornada"> 
                            <span class="capa-novidade-tag">Novo</span>
                        </div>
                        <div class="book-info-novidade">
                            <h3>A Jornada</h3>
                            <p>Autora: Erin E. Moulton</p>
                        </div>
                    </div>

                    <div class="book-card-novidade" data-action="view" data-book-title="O Mistério">
                        <div class="capa-novidade-container">
                            <img src="https://m.media-amazon.com/images/I/91V7KmeP0OL._SL1500_.jpg" alt="Capa do livro o Mistério da Sala Secreta">
                            <span class="capa-novidade-tag">Novo</span>
                        </div>
                        <div class="book-info-novidade">
                            <h3>O Mistério</h3>
                            <p>Autora: Lavínia Rocha</p>
                        </div>
                    </div>

                    <div class="book-card-novidade" data-action="view" data-book-title="Tecnologias Futuras">
                        <div class="capa-novidade-container">
                            <img src="https://m.media-amazon.com/images/I/81SjsDoMZDL._SL1500_.jpg" alt="Capa do livro O Futuro é agora">
                            <span class="capa-novidade-tag">Novo</span>
                        </div>
                        <div class="book-info-novidade">
                            <h3>Tecnologias Futuras</h3>
                            <p>Autor: Nexus Scriptum</p>
                        </div>
                    </div>

                    <div class="book-card-novidade" data-action="view" data-book-title="Histórias de Terror">
                        <div class="capa-novidade-container">
                            <img src="https://m.media-amazon.com/images/I/71VSyOSD3rL._SL1274_.jpg" alt="Capa Contos de Terror do Tio Montague">
                            <span class="capa-novidade-tag">Novo</span>
                        </div>
                        <div class="book-info-novidade">
                            <h3>Histórias de Terror</h3>
                            <p>Autor: Chris Priestley</p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>

        <section id="catalogo"> <h2 class="section-title">Catálogo de Livros</h2>
            <p class="section-subtitle">Explore nossa coleção de livros.</p>

            <div class="catalogo-geral">
                
                <div class="book-item-geral" data-action="view" data-book-title="O Senhor dos Anéis">
                    <div class="capa-mini-container">
                        <img src="https://m.media-amazon.com/images/I/81MZ8OjmQrL._SL1296_.jpg" alt="Capa do livro O Senhor dos Anéis">
                    </div>
                    <div class="info-geral">
                        <h3>O Senhor dos Anéis</h3>
                        <p>Uma clássica hi...</p>
                        <span>J.R.R. To...</span>
                    </div>
                </div>

                <div class="book-item-geral" data-action="view" data-book-title="1984">
                    <div class="capa-mini-container">
                        <img src="https://m.media-amazon.com/images/I/61M9jDcsl2L._SL1000_.jpg" alt="Capa do livro 1984">
                    </div>
                    <div class="info-geral">
                        <h3>1984</h3>
                        <p>Uma distopia ou...</p>
                        <span>George...</span>
                    </div>
                </div>

                <div class="book-item-geral" data-action="view" data-book-title="A Revolução dos Bichos">
                    <div class="capa-mini-container">
                        <img src="https://m.media-amazon.com/images/I/61yb1HHAIVL._SL1360_.jpg" alt="Capa do livro A Revolução dos Bichos">
                    </div>
                    <div class="info-geral">
                        <h3>A Revolução dos Bichos</h3>
                        <p>Uma fábula políti...</p>
                        <span>George...</span>
                    </div>
                </div>

                <div class="book-item-geral" data-action="view" data-book-title="Orgulho e Preconceito">
                    <div class="capa-mini-container">
                        <img src="https://m.media-amazon.com/images/I/71Xta4Nf7uL._SL1360_.jpg" alt="Capa do livro Orgulho e Preconceito">
                    </div>
                    <div class="info-geral">
                        <h3>Orgulho e Preconceito</h3>
                        <p>Uma crítica à socieda...</p>
                        <span>Jane Au...</span>
                    </div>
                </div>

                <div class="book-item-geral moby-dick-item" data-action="view" data-book-title="Moby Dick">
                    <div class="capa-mini-container">
                        <img src="https://m.media-amazon.com/images/I/61kif0Iav7L._SL1000_.jpg" alt="Capa do livro Moby Dick">
                    </div>
                    <div class="info-geral">
                        <h3>Moby Dick</h3>
                        <p>A busca obsessiva de um homem por uma baleia.</p>
                        <span>Herman Melville</span>
                    </div>
                </div>

            </div>
        </section>
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="#" data-action="footer" data-term="Sobre Nós">Sobre Nós</a>
            <a href="#" data-action="footer" data-term="Política de Privacidade">Política de Privacidade</a>
            <a href="#" data-action="footer" data-term="Termos de Uso">Termos de Uso</a>
            <a href="#" data-action="footer" data-term="Contacte-Nos">Contacte-Nos</a>
        </div>
    </footer>

    <!-- Scripts centralizados -->
    <script src="../scripts/dados.js"></script>
    <script src="../scripts/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Mapeamento de titulos para IDs
            const titulosParaIds = {
                'A Jornada': 6,           // Usando O Senhor dos Anéis como placeholder
                'O Mistério': 4,          // 1984
                'Tecnologias Futuras': 5, // A Revolução dos Bichos
                'Histórias de Terror': 8, // Moby Dick
                'O Senhor dos Anéis': 6,
                '1984': 4,
                'A Revolução dos Bichos': 5,
                'Orgulho e Preconceito': 7,
                'Moby Dick': 8
            };

            // Navegacao
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const term = link.getAttribute('data-term');
                    if (term === 'Home') APP.irParaHome();
                    else if (term === 'Salvos') APP.irParaFavoritos();
                    else if (term === 'Catálogo de Livros') {
                        document.getElementById('catalogo').scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            // Busca
            const searchInput = document.getElementById('searchInput');
            const heroSearchButton = document.getElementById('heroSearchButton');

            const realizarBusca = () => {
                const termo = searchInput.value.trim();
                if (termo) APP.realizarBusca(termo);
            };

            heroSearchButton.addEventListener('click', (e) => { e.preventDefault(); realizarBusca(); });
            searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { e.preventDefault(); realizarBusca(); } });

            // Categorias - filtrar por genero
            const categories = document.querySelectorAll('.categories a');
            categories.forEach(cat => {
                cat.addEventListener('click', (e) => {
                    e.preventDefault();
                    const genero = cat.getAttribute('data-term');
                    const livros = BIBLIOTECA.getLivrosPorGenero(genero);
                    if (livros.length > 0) {
                        APP.irParaLivro(livros[0].id);
                    } else {
                        alert(`Nenhum livro encontrado na categoria "${genero}"`);
                    }
                });
            });

            // Cards de livros clicaveis
            const bookElements = document.querySelectorAll('.book-card-novidade, .book-item-geral');
            bookElements.forEach(bookElement => {
                bookElement.style.cursor = 'pointer';
                bookElement.addEventListener('click', (e) => {
                    e.preventDefault();
                    const bookTitle = bookElement.getAttribute('data-book-title');

                    // Buscar por titulo
                    if (titulosParaIds[bookTitle]) {
                        APP.irParaLivro(titulosParaIds[bookTitle]);
                    } else {
                        // Buscar no banco de dados
                        const livro = BIBLIOTECA.livros.find(l =>
                            l.titulo.toLowerCase().includes(bookTitle.toLowerCase())
                        );
                        if (livro) {
                            APP.irParaLivro(livro.id);
                        }
                    }
                });
            });

            // Footer
            const footerLinks = document.querySelectorAll('.footer-links a');
            footerLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const term = link.getAttribute('data-term');
                    alert(`${term}: Em breve mais informações.`);
                });
            });

            // Verificar se veio com filtro na URL
            const filtro = APP.getParametroURL('filtro');
            if (filtro) {
                searchInput.value = filtro;
                // Destacar resultados (opcional)
            }
        });
    </script>
</body>
</html>
